<?xml version="1.0" encoding="UTF-8"?>
<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1400 1000" width="1400" height="1000">
  <defs>
    <!-- Gradients -->
    <linearGradient id="dataGrad" x1="0%" y1="0%" x2="0%" y2="100%">
      <stop offset="0%" style="stop-color:#E3F2FD;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#BBDEFB;stop-opacity:1" />
    </linearGradient>
    <linearGradient id="coreGrad" x1="0%" y1="0%" x2="0%" y2="100%">
      <stop offset="0%" style="stop-color:#FFF3E0;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#FFE0B2;stop-opacity:1" />
    </linearGradient>
    <linearGradient id="monitorGrad" x1="0%" y1="0%" x2="0%" y2="100%">
      <stop offset="0%" style="stop-color:#F3E5F5;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#E1BEE7;stop-opacity:1" />
    </linearGradient>
    <linearGradient id="mlflowGrad" x1="0%" y1="0%" x2="0%" y2="100%">
      <stop offset="0%" style="stop-color:#E8F5E9;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#C8E6C9;stop-opacity:1" />
    </linearGradient>
    <linearGradient id="uiGrad" x1="0%" y1="0%" x2="0%" y2="100%">
      <stop offset="0%" style="stop-color:#FCE4EC;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#F8BBD9;stop-opacity:1" />
    </linearGradient>
    <linearGradient id="storageGrad" x1="0%" y1="0%" x2="0%" y2="100%">
      <stop offset="0%" style="stop-color:#FFF9C4;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#FFF176;stop-opacity:1" />
    </linearGradient>
    <linearGradient id="autoGrad" x1="0%" y1="0%" x2="0%" y2="100%">
      <stop offset="0%" style="stop-color:#E0F2F1;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#B2DFDB;stop-opacity:1" />
    </linearGradient>
    
    <!-- Drop Shadow -->
    <filter id="shadow" x="-20%" y="-20%" width="140%" height="140%">
      <feDropShadow dx="2" dy="2" stdDeviation="3" flood-opacity="0.2"/>
    </filter>
    
    <!-- Arrow Markers -->
    <marker id="arrowhead" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#666"/>
    </marker>
    <marker id="arrowhead-blue" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#1976D2"/>
    </marker>
    <marker id="arrowhead-green" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#388E3C"/>
    </marker>
    <marker id="arrowhead-purple" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#7B1FA2"/>
    </marker>
  </defs>
  
  <!-- Background -->
  <rect width="1400" height="1000" fill="#FAFAFA"/>
  
  <!-- Title -->
  <text x="700" y="40" font-family="Segoe UI, Arial, sans-serif" font-size="28" font-weight="bold" fill="#1a1a2e" text-anchor="middle">
    Dengue Forecasting System - Architecture
  </text>
  <text x="700" y="65" font-family="Segoe UI, Arial, sans-serif" font-size="14" fill="#666" text-anchor="middle">
    ML Pipeline with MLflow Monitoring &amp; Streamlit Dashboard
  </text>

  <!-- ==================== DATA LAYER ==================== -->
  <g id="data-layer">
    <rect x="30" y="90" width="200" height="180" rx="10" fill="url(#dataGrad)" stroke="#1976D2" stroke-width="2" filter="url(#shadow)"/>
    <text x="130" y="115" font-family="Segoe UI, Arial, sans-serif" font-size="14" font-weight="bold" fill="#1976D2" text-anchor="middle">Data Layer</text>
    
    <rect x="50" y="130" width="160" height="50" rx="6" fill="#fff" stroke="#1976D2" stroke-width="1.5"/>
    <text x="130" y="152" font-family="Segoe UI, Arial, sans-serif" font-size="11" font-weight="bold" fill="#333" text-anchor="middle">infodengue_capitals</text>
    <text x="130" y="168" font-family="Segoe UI, Arial, sans-serif" font-size="10" fill="#666" text-anchor="middle">Dengue Cases Data</text>
    
    <rect x="50" y="195" width="160" height="50" rx="6" fill="#fff" stroke="#1976D2" stroke-width="1.5"/>
    <text x="130" y="217" font-family="Segoe UI, Arial, sans-serif" font-size="11" font-weight="bold" fill="#333" text-anchor="middle">sst_indices.csv</text>
    <text x="130" y="233" font-family="Segoe UI, Arial, sans-serif" font-size="10" fill="#666" text-anchor="middle">SST Climate Data</text>
  </g>

  <!-- ==================== CORE PIPELINE ==================== -->
  <g id="core-pipeline">
    <rect x="260" y="90" width="480" height="180" rx="10" fill="url(#coreGrad)" stroke="#E65100" stroke-width="2" filter="url(#shadow)"/>
    <text x="500" y="115" font-family="Segoe UI, Arial, sans-serif" font-size="14" font-weight="bold" fill="#E65100" text-anchor="middle">Core Pipeline - src/core/</text>
    
    <rect x="280" y="135" width="100" height="60" rx="6" fill="#fff" stroke="#E65100" stroke-width="1.5"/>
    <text x="330" y="158" font-family="Segoe UI, Arial, sans-serif" font-size="11" font-weight="bold" fill="#333" text-anchor="middle">DataLoader</text>
    <text x="330" y="175" font-family="Segoe UI, Arial, sans-serif" font-size="9" fill="#666" text-anchor="middle">Load &amp; Validate</text>
    <text x="330" y="187" font-family="Segoe UI, Arial, sans-serif" font-size="9" fill="#666" text-anchor="middle">Data</text>
    
    <rect x="395" y="135" width="100" height="60" rx="6" fill="#fff" stroke="#E65100" stroke-width="1.5"/>
    <text x="445" y="155" font-family="Segoe UI, Arial, sans-serif" font-size="11" font-weight="bold" fill="#333" text-anchor="middle">Feature</text>
    <text x="445" y="168" font-family="Segoe UI, Arial, sans-serif" font-size="11" font-weight="bold" fill="#333" text-anchor="middle">Engineer</text>
    <text x="445" y="185" font-family="Segoe UI, Arial, sans-serif" font-size="9" fill="#666" text-anchor="middle">Lag, Rolling, Season</text>
    
    <rect x="510" y="135" width="100" height="60" rx="6" fill="#fff" stroke="#E65100" stroke-width="1.5"/>
    <text x="560" y="155" font-family="Segoe UI, Arial, sans-serif" font-size="11" font-weight="bold" fill="#333" text-anchor="middle">Model</text>
    <text x="560" y="168" font-family="Segoe UI, Arial, sans-serif" font-size="11" font-weight="bold" fill="#333" text-anchor="middle">Trainer</text>
    <text x="560" y="185" font-family="Segoe UI, Arial, sans-serif" font-size="9" fill="#666" text-anchor="middle">GB, RF, AdaBoost</text>
    
    <rect x="625" y="135" width="100" height="60" rx="6" fill="#fff" stroke="#E65100" stroke-width="1.5"/>
    <text x="675" y="158" font-family="Segoe UI, Arial, sans-serif" font-size="11" font-weight="bold" fill="#333" text-anchor="middle">Forecaster</text>
    <text x="675" y="175" font-family="Segoe UI, Arial, sans-serif" font-size="9" fill="#666" text-anchor="middle">Future Predictions</text>
    <text x="675" y="187" font-family="Segoe UI, Arial, sans-serif" font-size="9" fill="#666" text-anchor="middle">+ SST Integration</text>
    
    <line x1="380" y1="165" x2="393" y2="165" stroke="#E65100" stroke-width="2" marker-end="url(#arrowhead)"/>
    <line x1="495" y1="165" x2="508" y2="165" stroke="#E65100" stroke-width="2" marker-end="url(#arrowhead)"/>
    <line x1="610" y1="165" x2="623" y2="165" stroke="#E65100" stroke-width="2" marker-end="url(#arrowhead)"/>
    
    <rect x="280" y="210" width="80" height="45" rx="5" fill="#FFF8E1" stroke="#FFA000" stroke-width="1" stroke-dasharray="4"/>
    <text x="320" y="228" font-family="Segoe UI, Arial, sans-serif" font-size="10" font-weight="bold" fill="#E65100" text-anchor="middle">Config</text>
    <text x="320" y="242" font-family="Segoe UI, Arial, sans-serif" font-size="8" fill="#666" text-anchor="middle">Hyperparams</text>
  </g>

  <!-- ==================== MODEL MANAGEMENT ==================== -->
  <g id="model-management">
    <rect x="770" y="90" width="200" height="180" rx="10" fill="url(#storageGrad)" stroke="#F57F17" stroke-width="2" filter="url(#shadow)"/>
    <text x="870" y="115" font-family="Segoe UI, Arial, sans-serif" font-size="14" font-weight="bold" fill="#F57F17" text-anchor="middle">Model Management</text>
    
    <rect x="790" y="130" width="160" height="50" rx="6" fill="#fff" stroke="#F57F17" stroke-width="1.5"/>
    <text x="870" y="152" font-family="Segoe UI, Arial, sans-serif" font-size="11" font-weight="bold" fill="#333" text-anchor="middle">ModelManager</text>
    <text x="870" y="168" font-family="Segoe UI, Arial, sans-serif" font-size="9" fill="#666" text-anchor="middle">Save/Load, Versioning</text>
    
    <rect x="790" y="195" width="160" height="50" rx="6" fill="#fff" stroke="#F57F17" stroke-width="1.5"/>
    <text x="870" y="215" font-family="Segoe UI, Arial, sans-serif" font-size="11" font-weight="bold" fill="#333" text-anchor="middle">models/</text>
    <text x="870" y="233" font-family="Segoe UI, Arial, sans-serif" font-size="9" fill="#666" text-anchor="middle">baseline_model.pkl</text>
  </g>

  <!-- ==================== MONITORING SYSTEM ==================== -->
  <g id="monitoring-system">
    <rect x="260" y="300" width="330" height="180" rx="10" fill="url(#monitorGrad)" stroke="#7B1FA2" stroke-width="2" filter="url(#shadow)"/>
    <text x="425" y="325" font-family="Segoe UI, Arial, sans-serif" font-size="14" font-weight="bold" fill="#7B1FA2" text-anchor="middle">Monitoring System - src/monitoring/</text>
    
    <rect x="280" y="345" width="140" height="70" rx="6" fill="#fff" stroke="#7B1FA2" stroke-width="1.5"/>
    <text x="350" y="368" font-family="Segoe UI, Arial, sans-serif" font-size="11" font-weight="bold" fill="#333" text-anchor="middle">ModelMonitor</text>
    <text x="350" y="385" font-family="Segoe UI, Arial, sans-serif" font-size="9" fill="#666" text-anchor="middle">Performance Tracking</text>
    <text x="350" y="398" font-family="Segoe UI, Arial, sans-serif" font-size="9" fill="#666" text-anchor="middle">Drift Detection (0.15)</text>
    
    <rect x="435" y="345" width="140" height="70" rx="6" fill="#fff" stroke="#7B1FA2" stroke-width="1.5"/>
    <text x="505" y="365" font-family="Segoe UI, Arial, sans-serif" font-size="11" font-weight="bold" fill="#333" text-anchor="middle">Dashboard</text>
    <text x="505" y="378" font-family="Segoe UI, Arial, sans-serif" font-size="11" font-weight="bold" fill="#333" text-anchor="middle">Generator</text>
    <text x="505" y="395" font-family="Segoe UI, Arial, sans-serif" font-size="9" fill="#666" text-anchor="middle">HTML + Chart.js</text>
    <text x="505" y="408" font-family="Segoe UI, Arial, sans-serif" font-size="9" fill="#666" text-anchor="middle">Interactive Reports</text>
    
    <rect x="280" y="430" width="140" height="35" rx="5" fill="#EDE7F6" stroke="#7B1FA2" stroke-width="1"/>
    <text x="350" y="450" font-family="Segoe UI, Arial, sans-serif" font-size="9" fill="#7B1FA2" text-anchor="middle">drift_threshold: 0.15</text>
    <text x="350" y="462" font-family="Segoe UI, Arial, sans-serif" font-size="9" fill="#7B1FA2" text-anchor="middle">min R2: 0.30</text>
  </g>

  <!-- ==================== MLFLOW ==================== -->
  <g id="mlflow">
    <rect x="620" y="300" width="350" height="180" rx="10" fill="url(#mlflowGrad)" stroke="#388E3C" stroke-width="2" filter="url(#shadow)"/>
    <text x="795" y="325" font-family="Segoe UI, Arial, sans-serif" font-size="14" font-weight="bold" fill="#388E3C" text-anchor="middle">MLflow Tracking</text>
    
    <rect x="640" y="345" width="130" height="60" rx="6" fill="#fff" stroke="#388E3C" stroke-width="1.5"/>
    <text x="705" y="368" font-family="Segoe UI, Arial, sans-serif" font-size="11" font-weight="bold" fill="#333" text-anchor="middle">MLflow Server</text>
    <text x="705" y="385" font-family="Segoe UI, Arial, sans-serif" font-size="9" fill="#666" text-anchor="middle">Port 5000</text>
    <text x="705" y="398" font-family="Segoe UI, Arial, sans-serif" font-size="9" fill="#666" text-anchor="middle">./mlruns/</text>
    
    <rect x="785" y="345" width="85" height="60" rx="6" fill="#fff" stroke="#388E3C" stroke-width="1.5"/>
    <text x="827" y="365" font-family="Segoe UI, Arial, sans-serif" font-size="10" font-weight="bold" fill="#333" text-anchor="middle">Experiments</text>
    <text x="827" y="382" font-family="Segoe UI, Arial, sans-serif" font-size="8" fill="#388E3C" text-anchor="middle">dengue_</text>
    <text x="827" y="393" font-family="Segoe UI, Arial, sans-serif" font-size="8" fill="#388E3C" text-anchor="middle">forecasting</text>
    
    <rect x="885" y="345" width="70" height="60" rx="6" fill="#fff" stroke="#388E3C" stroke-width="1.5"/>
    <text x="920" y="365" font-family="Segoe UI, Arial, sans-serif" font-size="10" font-weight="bold" fill="#333" text-anchor="middle">Artifacts</text>
    <text x="920" y="382" font-family="Segoe UI, Arial, sans-serif" font-size="8" fill="#666" text-anchor="middle">Models</text>
    <text x="920" y="393" font-family="Segoe UI, Arial, sans-serif" font-size="8" fill="#666" text-anchor="middle">Dashboards</text>
    
    <rect x="640" y="420" width="315" height="45" rx="5" fill="#E8F5E9" stroke="#388E3C" stroke-width="1"/>
    <text x="797" y="438" font-family="Segoe UI, Arial, sans-serif" font-size="9" fill="#388E3C" text-anchor="middle">Metrics: R2, MAE, RMSE, drift_detected, drift_severity_score</text>
    <text x="797" y="455" font-family="Segoe UI, Arial, sans-serif" font-size="9" fill="#388E3C" text-anchor="middle">Tags: DRIFT_STATUS, severity, r2_status</text>
  </g>

  <!-- ==================== AUTOMATION LAYER ==================== -->
  <g id="automation">
    <rect x="30" y="300" width="200" height="180" rx="10" fill="url(#autoGrad)" stroke="#00695C" stroke-width="2" filter="url(#shadow)"/>
    <text x="130" y="325" font-family="Segoe UI, Arial, sans-serif" font-size="14" font-weight="bold" fill="#00695C" text-anchor="middle">Automation</text>
    
    <rect x="50" y="345" width="160" height="50" rx="6" fill="#fff" stroke="#00695C" stroke-width="1.5"/>
    <text x="130" y="367" font-family="Segoe UI, Arial, sans-serif" font-size="11" font-weight="bold" fill="#333" text-anchor="middle">drift_scheduler.py</text>
    <text x="130" y="383" font-family="Segoe UI, Arial, sans-serif" font-size="9" fill="#666" text-anchor="middle">Daily at 8:00 AM</text>
    
    <rect x="50" y="410" width="160" height="50" rx="6" fill="#fff" stroke="#00695C" stroke-width="1.5"/>
    <text x="130" y="432" font-family="Segoe UI, Arial, sans-serif" font-size="11" font-weight="bold" fill="#333" text-anchor="middle">run_app.ps1/sh</text>
    <text x="130" y="448" font-family="Segoe UI, Arial, sans-serif" font-size="9" fill="#666" text-anchor="middle">Start MLflow + Streamlit</text>
  </g>

  <!-- ==================== STREAMLIT UI ==================== -->
  <g id="streamlit-ui">
    <rect x="30" y="510" width="540" height="200" rx="10" fill="url(#uiGrad)" stroke="#C2185B" stroke-width="2" filter="url(#shadow)"/>
    <text x="300" y="535" font-family="Segoe UI, Arial, sans-serif" font-size="14" font-weight="bold" fill="#C2185B" text-anchor="middle">Streamlit Dashboard - Port 8501</text>
    
    <rect x="50" y="555" width="115" height="65" rx="6" fill="#fff" stroke="#C2185B" stroke-width="1.5"/>
    <text x="107" y="578" font-family="Segoe UI, Arial, sans-serif" font-size="11" font-weight="bold" fill="#333" text-anchor="middle">Dashboard</text>
    <text x="107" y="595" font-family="Segoe UI, Arial, sans-serif" font-size="9" fill="#666" text-anchor="middle">Drift Alerts</text>
    <text x="107" y="608" font-family="Segoe UI, Arial, sans-serif" font-size="9" fill="#666" text-anchor="middle">Model Status</text>
    
    <rect x="180" y="555" width="115" height="65" rx="6" fill="#fff" stroke="#C2185B" stroke-width="1.5"/>
    <text x="237" y="578" font-family="Segoe UI, Arial, sans-serif" font-size="11" font-weight="bold" fill="#333" text-anchor="middle">Training</text>
    <text x="237" y="595" font-family="Segoe UI, Arial, sans-serif" font-size="9" fill="#666" text-anchor="middle">Model Evaluation</text>
    <text x="237" y="608" font-family="Segoe UI, Arial, sans-serif" font-size="9" fill="#666" text-anchor="middle">Metrics Display</text>
    
    <rect x="310" y="555" width="115" height="65" rx="6" fill="#fff" stroke="#C2185B" stroke-width="1.5"/>
    <text x="367" y="578" font-family="Segoe UI, Arial, sans-serif" font-size="11" font-weight="bold" fill="#333" text-anchor="middle">Forecast</text>
    <text x="367" y="595" font-family="Segoe UI, Arial, sans-serif" font-size="9" fill="#666" text-anchor="middle">2026 Predictions</text>
    <text x="367" y="608" font-family="Segoe UI, Arial, sans-serif" font-size="9" fill="#666" text-anchor="middle">SST Integration</text>
    
    <rect x="440" y="555" width="115" height="65" rx="6" fill="#fff" stroke="#C2185B" stroke-width="1.5"/>
    <text x="497" y="578" font-family="Segoe UI, Arial, sans-serif" font-size="11" font-weight="bold" fill="#333" text-anchor="middle">Monitoring</text>
    <text x="497" y="595" font-family="Segoe UI, Arial, sans-serif" font-size="9" fill="#666" text-anchor="middle">MLflow Runs</text>
    <text x="497" y="608" font-family="Segoe UI, Arial, sans-serif" font-size="9" fill="#666" text-anchor="middle">History View</text>
    
    <rect x="50" y="635" width="505" height="55" rx="5" fill="#FFEBEE" stroke="#EF5350" stroke-width="1"/>
    <text x="302" y="655" font-family="Segoe UI, Arial, sans-serif" font-size="10" font-weight="bold" fill="#C62828" text-anchor="middle">Real-time Drift Alerts</text>
    <text x="302" y="675" font-family="Segoe UI, Arial, sans-serif" font-size="9" fill="#666" text-anchor="middle">Red banner when CRITICAL | Yellow when WARNING | Green when OK</text>
  </g>

  <!-- ==================== DEPLOYMENT OPTIONS ==================== -->
  <g id="deployment">
    <rect x="600" y="510" width="370" height="200" rx="10" fill="#ECEFF1" stroke="#546E7A" stroke-width="2" filter="url(#shadow)"/>
    <text x="785" y="535" font-family="Segoe UI, Arial, sans-serif" font-size="14" font-weight="bold" fill="#546E7A" text-anchor="middle">Deployment Options</text>
    
    <rect x="620" y="555" width="100" height="70" rx="6" fill="#fff" stroke="#546E7A" stroke-width="1.5"/>
    <text x="670" y="578" font-family="Segoe UI, Arial, sans-serif" font-size="11" font-weight="bold" fill="#333" text-anchor="middle">Local</text>
    <text x="670" y="595" font-family="Segoe UI, Arial, sans-serif" font-size="9" fill="#666" text-anchor="middle">Python venv</text>
    <text x="670" y="608" font-family="Segoe UI, Arial, sans-serif" font-size="9" fill="#666" text-anchor="middle">run_app scripts</text>
    
    <rect x="735" y="555" width="100" height="70" rx="6" fill="#fff" stroke="#2196F3" stroke-width="1.5"/>
    <text x="785" y="578" font-family="Segoe UI, Arial, sans-serif" font-size="11" font-weight="bold" fill="#333" text-anchor="middle">Docker</text>
    <text x="785" y="595" font-family="Segoe UI, Arial, sans-serif" font-size="9" fill="#666" text-anchor="middle">docker-compose</text>
    <text x="785" y="608" font-family="Segoe UI, Arial, sans-serif" font-size="9" fill="#666" text-anchor="middle">Multi-service</text>
    
    <rect x="850" y="555" width="100" height="70" rx="6" fill="#fff" stroke="#4285F4" stroke-width="1.5"/>
    <text x="900" y="578" font-family="Segoe UI, Arial, sans-serif" font-size="11" font-weight="bold" fill="#333" text-anchor="middle">GCP</text>
    <text x="900" y="595" font-family="Segoe UI, Arial, sans-serif" font-size="9" fill="#666" text-anchor="middle">Cloud Run</text>
    <text x="900" y="608" font-family="Segoe UI, Arial, sans-serif" font-size="9" fill="#666" text-anchor="middle">2Gi / 2CPU</text>
    
    <rect x="620" y="640" width="330" height="55" rx="5" fill="#E3F2FD" stroke="#1976D2" stroke-width="1"/>
    <text x="785" y="660" font-family="Segoe UI, Arial, sans-serif" font-size="10" font-weight="bold" fill="#1565C0" text-anchor="middle">Tech Stack</text>
    <text x="785" y="680" font-family="Segoe UI, Arial, sans-serif" font-size="9" fill="#666" text-anchor="middle">scikit-learn | MLflow 2.0+ | Streamlit 1.28+ | Chart.js | Plotly</text>
  </g>

  <!-- ==================== DATA FLOW ARROWS ==================== -->
  <path d="M230 180 L260 180" stroke="#1976D2" stroke-width="2.5" fill="none" marker-end="url(#arrowhead-blue)"/>
  <path d="M740 165 L770 165" stroke="#E65100" stroke-width="2.5" fill="none" marker-end="url(#arrowhead)"/>
  <path d="M500 270 L500 298" stroke="#7B1FA2" stroke-width="2.5" fill="none" marker-end="url(#arrowhead-purple)"/>
  <path d="M590 390 L618 390" stroke="#388E3C" stroke-width="2.5" fill="none" marker-end="url(#arrowhead-green)"/>
  <path d="M230 390 L258 390" stroke="#00695C" stroke-width="2.5" fill="none" marker-end="url(#arrowhead)"/>
  <path d="M130 480 L130 495 Q130 505 140 505 L620 505 Q630 505 630 495 L630 480" stroke="#00695C" stroke-width="2" fill="none" stroke-dasharray="5,3" marker-end="url(#arrowhead)"/>
  <path d="M795 480 L795 495 Q795 510 785 510 L560 510 Q550 510 550 520 L550 508" stroke="#388E3C" stroke-width="2" fill="none" stroke-dasharray="5,3" marker-end="url(#arrowhead-green)"/>
  <path d="M870 270 L870 288 Q870 300 858 300 L600 340 Q590 345 590 355" stroke="#F57F17" stroke-width="2" fill="none" stroke-dasharray="5,3"/>

  <!-- ==================== LEGEND ==================== -->
  <g id="legend" transform="translate(1000, 90)">
    <rect x="0" y="0" width="180" height="180" rx="8" fill="#fff" stroke="#ddd" stroke-width="1" filter="url(#shadow)"/>
    <text x="90" y="25" font-family="Segoe UI, Arial, sans-serif" font-size="12" font-weight="bold" fill="#333" text-anchor="middle">Legend</text>
    
    <rect x="15" y="40" width="20" height="12" fill="url(#dataGrad)" stroke="#1976D2" stroke-width="1"/>
    <text x="45" y="50" font-family="Segoe UI, Arial, sans-serif" font-size="10" fill="#333">Data Layer</text>
    
    <rect x="15" y="60" width="20" height="12" fill="url(#coreGrad)" stroke="#E65100" stroke-width="1"/>
    <text x="45" y="70" font-family="Segoe UI, Arial, sans-serif" font-size="10" fill="#333">Core Pipeline</text>
    
    <rect x="15" y="80" width="20" height="12" fill="url(#monitorGrad)" stroke="#7B1FA2" stroke-width="1"/>
    <text x="45" y="90" font-family="Segoe UI, Arial, sans-serif" font-size="10" fill="#333">Monitoring</text>
    
    <rect x="15" y="100" width="20" height="12" fill="url(#mlflowGrad)" stroke="#388E3C" stroke-width="1"/>
    <text x="45" y="110" font-family="Segoe UI, Arial, sans-serif" font-size="10" fill="#333">MLflow</text>
    
    <rect x="15" y="120" width="20" height="12" fill="url(#uiGrad)" stroke="#C2185B" stroke-width="1"/>
    <text x="45" y="130" font-family="Segoe UI, Arial, sans-serif" font-size="10" fill="#333">Streamlit UI</text>
    
    <line x1="15" y1="150" x2="35" y2="150" stroke="#666" stroke-width="2"/>
    <text x="45" y="154" font-family="Segoe UI, Arial, sans-serif" font-size="10" fill="#333">Data Flow</text>
    
    <line x1="15" y1="168" x2="35" y2="168" stroke="#666" stroke-width="2" stroke-dasharray="5,3"/>
    <text x="45" y="172" font-family="Segoe UI, Arial, sans-serif" font-size="10" fill="#333">Optional Flow</text>
  </g>

  <!-- ==================== FLOW LABELS ==================== -->
  <text x="245" y="172" font-family="Segoe UI, Arial, sans-serif" font-size="8" fill="#1976D2" text-anchor="middle">CSV</text>
  <text x="755" y="158" font-family="Segoe UI, Arial, sans-serif" font-size="8" fill="#E65100" text-anchor="middle">Save</text>
  <text x="515" y="285" font-family="Segoe UI, Arial, sans-serif" font-size="8" fill="#7B1FA2" text-anchor="middle">Log</text>
  <text x="604" y="382" font-family="Segoe UI, Arial, sans-serif" font-size="8" fill="#388E3C" text-anchor="middle">Track</text>
  <text x="244" y="382" font-family="Segoe UI, Arial, sans-serif" font-size="8" fill="#00695C" text-anchor="middle">Trigger</text>
  
  <!-- Footer -->
  <text x="700" y="980" font-family="Segoe UI, Arial, sans-serif" font-size="11" fill="#999" text-anchor="middle">
    Dengue Forecasting System v1.0 | ML Pipeline with Automated Drift Detection
  </text>
</svg>
